<% content_for :head do %>
  <script>
    var categories = ['<%= @house_book.outlay_categories.map(&:name).join("','") %>'].sort();
    var notes = ['<%= @house_book.outlay_records.map(&:note).uniq.join("','") %>'].sort();
    jQuery(function () {
      var $input = jQuery('.form_container input[type=text]');
      $input.autocomplete([
      {
        regex: /^\d+[.,]?\d*\s+(.*)$/,
        items: categories,
        suffix: ': '
        }, {
        regex: /^\d+[.,]?\d*\s+.*?: (.+)$/,
        items: notes
      }
      ]);
      $input[0].focus();
    });
  </script>
<% end %>
<div class="block_wrapper">
  <div class="form_container upper_rounded">
    <%= form_for @house_book.outlay_records.build, :remote => true do |f| %>
      <%= text_field_tag :outlay_record %><br/>
      <p class="example">
     <%= t 'outlay_record.example' %>: <strong>
        <span style="color: green" title="Amount"><%= t 'outlay_record.sum' %></span>
        <span style="color: blue" title="Category"><%= t 'outlay_record.category' %></span><span
        style="color: red" title="colon">:</span>
        <span style="color: gray" title="Short note"><%= t 'outlay_record.comment' %></span>
      </strong><br/>
      </p>
      <%= f.submit t('outlay_record.create') %>
    <% end %>
  </div>
</div>

<%= render :partial => 'outlays/day_block', :locals => { :records => @today_records } %>
